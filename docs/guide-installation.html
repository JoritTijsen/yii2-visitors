<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/969a6042/css/bootstrap.css" rel="stylesheet">
<link href="./assets/f28e901f/solarized_light.css" rel="stylesheet">
<link href="./assets/43dc5993/style.css" rel="stylesheet">
<script src="./assets/6e695b5a/jquery.js"></script>
<script src="./assets/969a6042/js/bootstrap.js"></script>
<script src="./assets/7bdf3495/jssearch.js"></script>    <title>The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w317" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w317-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">The Definitive Guide to Yii 2.0</a></div><div id="w317-collapse" class="collapse navbar-collapse"><ul id="w318" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Extensions <span class="caret"></span></a><ul id="w319" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-composer-index.html" tabindex="-1">composer</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li></ul></li>
<li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-316" data-toggle="collapse" data-parent="#navigation">Installation <b class="caret"></b></a><div id="navigation-316" class="submenu panel-collapse collapse in"></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Installation <span id="installation"></span><a href="#installation" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#getting-composer-package">Getting Composer package</a></li>
<li><a href="#configuring-application">Configuring application</a></li></ol></div>
<h2>Getting Composer package <span id="getting-composer-package"></span><a href="#getting-composer-package" class="hashlink">&para;</a></h2><p>The preferred way to install this extension is through <a href="http://getcomposer.org/download/">composer</a>.</p>
<p>Either run</p>
<pre><code class="hljs nginx"><span class="hljs-title">php</span> composer.phar require --prefer-dist yiisoft/yii2-<span class="hljs-built_in">debug</span>
</code></pre>
<p>or add</p>
<pre><code class="hljs bash"><span class="hljs-string">"yiisoft/yii2-debug"</span>: <span class="hljs-string">"~2.0.0"</span>
</code></pre>
<p>to the require section of your <code>composer.json</code> file.</p>
<h2>Configuring application <span id="configuring-application"></span><a href="#configuring-application" class="hashlink">&para;</a></h2><p>To enable extension, add these lines to your configuration file to enable the debug module:</p>
<pre><code class="hljs php language-php"><span class="hljs-string">'bootstrap'</span> =&gt; [<span class="hljs-string">'debug'</span>],
<span class="hljs-string">'modules'</span> =&gt; [
    <span class="hljs-string">'debug'</span> =&gt; [
        <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\debug\Module'</span>,
    ],
]
</code></pre>
<p>By default, the debug module only works when browsing the website from localhost. If you want to use it on a remote (staging)
server, add the parameter <code>allowedIPs</code> to the configuration to whitelist your IP:</p>
<pre><code class="hljs php language-php"><span class="hljs-string">'bootstrap'</span> =&gt; [<span class="hljs-string">'debug'</span>],
<span class="hljs-string">'modules'</span> =&gt; [
    <span class="hljs-string">'debug'</span> =&gt; [
        <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\debug\Module'</span>,
        <span class="hljs-string">'allowedIPs'</span> =&gt; [<span class="hljs-string">'1.2.3.4'</span>, <span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-string">'::1'</span>]
    ]
]
</code></pre>
<p>If you are using <code>enableStrictParsing</code> URL manager option, add the following to your <code>rules</code>:</p>
<pre><code class="hljs php language-php"><span class="hljs-string">'urlManager'</span> =&gt; [
    <span class="hljs-string">'enableStrictParsing'</span> =&gt; <span class="hljs-keyword">true</span>,
    <span class="hljs-string">'rules'</span> =&gt; [
        <span class="hljs-comment">// ...</span>
        <span class="hljs-string">'debug/&lt;controller&gt;/&lt;action&gt;'</span> =&gt; <span class="hljs-string">'debug/&lt;controller&gt;/&lt;action&gt;'</span>,
    ],
],
</code></pre>
<blockquote class="note"><p><strong>Note: </strong>the debugger stores information about each request in the <code>@runtime/debug</code> directory. If you have problems using
the debugger, such as weird error messages when using it, or the toolbar not showing up or not showing any requests, check
whether the web server has enough permissions to access this directory and the files located inside.</p>
</blockquote>
<h3>Extra configuration for logging and profiling <span id="extra-configuration-for-logging-and-profiling"></span><a href="#extra-configuration-for-logging-and-profiling" class="hashlink">&para;</a></h3><p>Logging and profiling are simple but powerful tools that may help you to understand the execution flow of both the
framework and the application. These tools are useful for development and production environments alike.</p>
<p>While in a production environment, you should log only significantly important  messages manually, as described in
<a href="https://github.com/yiisoft/yii2/blob/master/docs/guide/runtime-logging.md">logging guide section</a>. It hurts performance too much to continue to log all messages in production.</p>
<p>In a development environment, the more logging the better, and it's especially useful to record the execution trace.</p>
<p>In order to see the trace messages that will help you to understand what happens under the hood of the framework, you
need to set the trace level in the configuration file:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">return</span> [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-string">'components'</span> =&gt; [
        <span class="hljs-string">'log'</span> =&gt; [
            <span class="hljs-string">'traceLevel'</span> =&gt; YII_DEBUG ? <span class="hljs-number">3</span> : <span class="hljs-number">0</span>, <span class="hljs-comment">// &lt;-- here</span>
</code></pre>
<p>By default, the trace level is automatically set to <code>3</code> if Yii is running in debug mode, as determined by the presence of
the following line in your <code>index.php</code> file:</p>
<pre><code class="hljs php language-php">defined(<span class="hljs-string">'YII_DEBUG'</span>) <span class="hljs-keyword">or</span> define(<span class="hljs-string">'YII_DEBUG'</span>, <span class="hljs-keyword">true</span>);
</code></pre>
<blockquote class="note"><p><strong>Note: </strong>Make sure to disable debug mode in production environments since it may have a significant and adverse performance
effect. Further, the debug mode may expose sensitive information to end users.</p>
</blockquote>
<h3>Configuring Database panel <span id="configuring-database-panel"></span><a href="#configuring-database-panel" class="hashlink">&para;</a></h3><p>Database panel default sorting and filtering can be configured like the following:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$config</span>[<span class="hljs-string">'modules'</span>][<span class="hljs-string">'debug'</span>] = [
    <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\debug\Module'</span>,
    <span class="hljs-string">'panels'</span> =&gt; [
        <span class="hljs-string">'db'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\debug\panels\DbPanel'</span>,
            <span class="hljs-string">'defaultOrder'</span> =&gt; [
                <span class="hljs-string">'seq'</span> =&gt; SORT_ASC
            ],
            <span class="hljs-string">'defaultFilter'</span> =&gt; [
                <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'SELECT'</span>
            ]
        ],
    ],
];
</code></pre>
<h3>Extra configuration for opening in IDE's <span id="extra-configuration-for-opening-in-ides"></span><a href="#extra-configuration-for-opening-in-ides" class="hashlink">&para;</a></h3><p>Wouldn't it be nice to be able to open files directly from the debug trace? </p>
<p>Well, you can!
With a few settings you're ready to go!</p>
<h4>Windows <span id="windows"></span><a href="#windows" class="hashlink">&para;</a></h4><h5>1) Create a WScript file open_phpstorm.js: <span id="1-create-a-wscript-file-openphpstormjs"></span><a href="#1-create-a-wscript-file-openphpstormjs" class="hashlink">&para;</a></h5><p>Create a file <code>C:\Program Files (x86)\JetBrains\open_phpstorm.js</code> (example for PhpStorm)
with the following content:</p>
<pre><code class="hljs javascript language-js">
<span class="hljs-keyword">var</span> settings = {
	<span class="hljs-comment">// Set to 'true' (without quotes) if run on Windows 64bit. Set to 'false' (without quotes) otherwise.</span>
	x64: <span class="hljs-literal">true</span>,

	<span class="hljs-comment">// Set to folder name, where PhpStorm was installed to (e.g. 'PhpStorm')</span>
	folder_name: <span class="hljs-string">'PhpStorm 2016.2.1'</span>,

	<span class="hljs-comment">// Set to window title (only text after dash sign), that you see, when switching to running PhpStorm instance</span>
	window_title: <span class="hljs-string">'PhpStorm 2016.2.1'</span>,

	<span class="hljs-comment">// In case your file is mapped via a network share and paths do not match.</span>
	<span class="hljs-comment">// eg. /var/www will can replaced with Y:/</span>
	projects_basepath: <span class="hljs-string">''</span>,
	projects_path_alias: <span class="hljs-string">''</span>
};


<span class="hljs-comment">// don't change anything below this line, unless you know what you're doing</span>
<span class="hljs-keyword">var</span>	url = WScript.Arguments(<span class="hljs-number">0</span>),
	match = <span class="hljs-regexp">/^ide:\/\/(?:.+)file:\/\/(.+)&amp;line=(\d+)$/</span>.exec(url),
	project = <span class="hljs-string">''</span>,
	editor = <span class="hljs-string">'"C:\\'</span> + (settings.x64 ? <span class="hljs-string">'Program Files'</span> : <span class="hljs-string">'Program Files (x86)'</span>) + <span class="hljs-string">'\\JetBrains\\'</span> + settings.folder_name + <span class="hljs-string">'\\bin\\PhpStorm.exe"'</span>;

<span class="hljs-keyword">if</span> (match) {

	<span class="hljs-keyword">var</span>	shell = <span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">'WScript.Shell'</span>),
		file_system = <span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">'Scripting.FileSystemObject'</span>),
		file = <span class="hljs-built_in">decodeURIComponent</span>(match[<span class="hljs-number">1</span>]).replace(<span class="hljs-regexp">/\+/g</span>, <span class="hljs-string">' '</span>),
		search_path = file.replace(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">'\\'</span>);

	<span class="hljs-keyword">if</span> (settings.projects_basepath != <span class="hljs-string">''</span> &amp;&amp; settings.projects_path_alias != <span class="hljs-string">''</span>) {
		file = file.replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + settings.projects_basepath), settings.projects_path_alias);
	}

	<span class="hljs-keyword">while</span> (search_path.lastIndexOf(<span class="hljs-string">'\\'</span>) != -<span class="hljs-number">1</span>) {
		search_path = search_path.substring(<span class="hljs-number">0</span>, search_path.lastIndexOf(<span class="hljs-string">'\\'</span>));

		<span class="hljs-keyword">if</span>(file_system.FileExists(search_path+<span class="hljs-string">'\\.idea\\.name'</span>)) {
			project = search_path;
			<span class="hljs-keyword">break</span>;
		}
	}

	<span class="hljs-keyword">if</span> (project != <span class="hljs-string">''</span>) {
		editor += <span class="hljs-string">' "%project%"'</span>;
	}

	editor += <span class="hljs-string">' --line %line% "%file%"'</span>;

	<span class="hljs-keyword">var</span> command = editor.replace(<span class="hljs-regexp">/%line%/g</span>, match[<span class="hljs-number">2</span>])
						.replace(<span class="hljs-regexp">/%file%/g</span>, file)
						.replace(<span class="hljs-regexp">/%project%/g</span>, project)
						.replace(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">'\\'</span>);

	shell.Exec(command);
	shell.AppActivate(settings.window_title);
}
</code></pre>
<h5>2) Create a registry file and execute this file <span id="2-create-a-registry-file-and-execute-this-file"></span><a href="#2-create-a-registry-file-and-execute-this-file" class="hashlink">&para;</a></h5><p>Create a registry file <code>C:\Program Files (x86)\JetBrains\open_phpstorm.reg</code> (example for PhpStorm)
with the following content and make sure the paths are correct:</p>
<pre><code class="language-windows.reg">Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\ide]
@="\"URL:ide Protocol\""
"URL Protocol"=""

[HKEY_CLASSES_ROOT\ide\shell\open\command]
@="wscript \"C:\\Program Files (x86)\\JetBrains\\open_phpstorm.js\" %1"
</code></pre>
<p>Now you are able to use the ide:// protocol in your browser. </p>
<p>When you click such a link, the IDE will automatically open the file and move the cursor to the corresponding line.</p>
<h5>Disable links <span id="disable-links"></span><a href="#disable-links" class="hashlink">&para;</a></h5><p>IDE links for traces are created by default. You have to set the property <code>yii\debug\Module::traceLink</code> to
 false to render a textual line only.</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>

...
<span class="hljs-string">'modules'</span> =&gt; [
    <span class="hljs-string">'debug'</span> =&gt; [
        <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\debug\Module'</span>,
        <span class="hljs-string">'traceLink'</span> =&gt; <span class="hljs-keyword">false</span>
    ]
]

...
</code></pre>
<h3>Virtualized or dockerized <span id="virtualized-or-dockerized"></span><a href="#virtualized-or-dockerized" class="hashlink">&para;</a></h3><p>If your application is run under a virtualized or dockerized environment, it is often the case that the application's base path is different inside of the virtual machine or container than on your host machine. For the links work in those situations, you can configure <code>traceLine</code> like this (change the path to your app):</p>
<pre><code class="hljs php language-php"><span class="hljs-string">'traceLine'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-variable">$options</span>, <span class="hljs-variable">$panel</span>)</span> </span>{
    <span class="hljs-variable">$filePath</span> = str_replace(Yii::<span class="hljs-variable">$app</span>-&gt;basePath, <span class="hljs-string">'~/path/to/your/app'</span>, <span class="hljs-variable">$options</span>[<span class="hljs-string">'file'</span>]);
    <span class="hljs-keyword">return</span> strtr(<span class="hljs-string">'&lt;a href="ide://open?url=file://{file}&amp;line={line}"&gt;{text}&lt;/a&gt;'</span>, [<span class="hljs-string">'{file}'</span> =&gt; <span class="hljs-variable">$filePath</span>]);
},
</code></pre>
<h3>Switching Users <span id="switching-users"></span><a href="#switching-users" class="hashlink">&para;</a></h3><p>You can use log in as any user and reset to back to your primary user. In order to enable the feature you need to configure access permissions in the <code>UserPanel</code> config. By default access is denied to everyone.</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">return</span> [
    <span class="hljs-string">'bootstrap'</span> =&gt; [<span class="hljs-string">'debug'</span>],
    <span class="hljs-string">'modules'</span> =&gt; [
        <span class="hljs-string">'debug'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\debug\Module'</span>,
            <span class="hljs-string">'panels'</span> =&gt; [
                <span class="hljs-string">'user'</span> =&gt; [
                    <span class="hljs-string">'class'</span>=&gt;<span class="hljs-string">'yii\debug\panels\UserPanel'</span>,
                    <span class="hljs-string">'ruleUserSwitch'</span> =&gt; [
                        <span class="hljs-string">'allow'</span> =&gt; <span class="hljs-keyword">true</span>,
                        <span class="hljs-string">'roles'</span> =&gt; [<span class="hljs-string">'manager'</span>],
                    ]
                ]
            ]
        ],
        <span class="hljs-comment">// ...</span>
    ],
    ...
];
</code></pre>
<p>For details see <a href="http://www.yiiframework.com/doc-2.0/guide-security-authorization.html">Guide Authorization</a>.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Wed, 15 Aug 2018 18:48:11 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
